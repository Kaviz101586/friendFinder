<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Friend Finder</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css\style.css">
</head>

<body>
    <div class="container" id="header">
        <h1>Survey Questions</h1>
        <hr class="my-4">
        <h2>About You</h2>
        <form>
            <div class="form-group">
                <label for="userName">Name (Required)</label>
                <input type="text" id="userName" class="form-control form-header">
            </div>
            <div class="form-group">
                <label for="userPicture">Link to Photo Image (Required)</label>
                <input type="text" id="userPhoto" class="form-control form-header">
            </div>
        </form>
        <hr class="my-4">
    </div>
    <div class="container" id="survey">
        <div class="questions">
            <h3>Question 1</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like sports?</h4>
            <form>
                <fieldset>
                    <select id="q1">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 2</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like music?</h4>
            <form>
                <fieldset>
                    <select id="q2">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 3</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like shows (musicals)?</h4>
            <form>
                <fieldset>
                    <select id="q3">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 4</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like movies?</h4>
            <form>
                <fieldset>
                    <select id="q4">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 5</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like seafood?</h4>
            <form>
                <fieldset>
                    <select id="q5">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 6</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like shopping?</h4>
            <form>
                <fieldset>
                    <select id="q6">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 7</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like traditions?</h4>
            <form>
                <fieldset>
                    <select id="q7">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 8</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like politics?</h4>
            <form>
                <fieldset>
                    <select id="q8">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 9</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like religion?</h4>
            <form>
                <fieldset>
                    <select id="q9">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="questions">
            <h3>Question 10</h3>
            <br>
            <h4>On a scale of 1 to 5, 5 being the most someone can like something, how much do you like travel?</h4>
            <form>
                <fieldset>
                    <select id="q10">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <input type="submit" value="Submit" id="submitBtn">


        <div class="modal fade" id="resultsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content img-responsive">
                    <div class="modal-header">
                        <h5 class="modal-title" id="matchName">
                            Your match
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="matchNameDiv" class="text-center"></div>
                        <div class="img-responsive" id="matchPhotoDiv"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script>
        var scores = [];
        var userName;
        var userPhoto;
        $("#submitBtn").on("click", function () {
            let userName = $("#userName").val().trim();
            let userPhoto = $("#userPhoto").val().trim();
            if (!userName && !userPhoto || !userName || !userPhoto) {
                alert("You must fill in all required fields");
            }
            else {
                let q1 = parseInt($("#q1").val());
                let q2 = parseInt($("#q2").val());
                let q3 = parseInt($("#q3").val());
                let q4 = parseInt($("#q4").val());
                let q5 = parseInt($("#q5").val());
                let q6 = parseInt($("#q6").val());
                let q7 = parseInt($("#q7").val());
                let q8 = parseInt($("#q8").val());
                let q9 = parseInt($("#q9").val());
                let q10 = parseInt($("#q10").val());
                scores = [];
                scores.push(q1, q2, q3, q4, q5, q6, q7, q8, q9, q10);
                let user = {
                    name: userName,
                    photo: userPhoto,
                    scores: scores
                };
                $.post("/api/friends", user, function (response) {
                    console.log(user);
                    console.log(response);
                    var matchImg = $("<img>").attr("src", response.photo).addClass("match-image");
                    $('#resultsModal').modal('show');
                    $("#matchNameDiv").text(response.name);
                    $("#matchPhotoDiv").empty().append(matchImg);
                });
            }
        });
    </script>
</body>


</html>